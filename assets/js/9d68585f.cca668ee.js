"use strict";(self.webpackChunkmcp_ai=self.webpackChunkmcp_ai||[]).push([[9308],{365:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var i=t(8521),o=t(4848),a=t(8453);const s={title:"OpenAI SDK Meets MCP (Model Context Protocol)",description:"A comprehensive guide on how to integrate OpenAI's SDK with MCP (Model Context Protocol) to enhance AI model interactions through dynamic tool calling.",authors:["adrian"],tags:["mcp","openai","tool-calling","oas"],image:"https://cdn.gamma.app/z3n406kubdfbysb/generated-images/ibH5HhVl1c3OZPUlUBXBp.png"},r=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Why Integrate OpenAI with MCP?",id:"why-integrate-openai-with-mcp",level:2},{value:"Three Approaches to Tool Calling",id:"three-approaches-to-tool-calling",level:2},{value:"End-to-End Example",id:"end-to-end-example",level:2},{value:"1. Set Up an MCP Server",id:"1-set-up-an-mcp-server",level:3},{value:"2. Create an OpenAI Account",id:"2-create-an-openai-account",level:3},{value:"3. Install the OpenAI SDK",id:"3-install-the-openai-sdk",level:3},{value:"4. Write the Code",id:"4-write-the-code",level:3},{value:"5. Run the Code",id:"5-run-the-code",level:3},{value:"6. See the Magic",id:"6-see-the-magic",level:3},{value:"7. Explore Further",id:"7-explore-further",level:3},{value:"Demo Video",id:"demo-video",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"An evolution of tool calling with MCP, thanks to OpenAI's latest SDK updates."}),"\n",(0,o.jsxs)(n.p,{children:["Step-by-step, I'll guide you through setting up an MCP server, integrating it with the OpenAI SDK, and running a complete example that showcases ",(0,o.jsx)(n.strong,{children:"dynamic tool calling"}),". By the end of this post, you'll be equipped to leverage MCP in your own OpenAI-powered applications."]}),"\n",(0,o.jsx)(n.p,{children:"End-to-End Example, Setting Up an MCP Server, Integrating with OpenAI LLM, and Running some tests to see it in action."}),"\n",(0,o.jsx)(n.p,{children:"MCP, or Model Context Protocol, is a framework that enhances how AI models interact with their operational context. By integrating MCP, you ensure your AI models are not only aware of the data they process but also the environment in which they operate. This leads to more accurate and contextually relevant outputs."}),"\n",(0,o.jsx)(n.h2,{id:"why-integrate-openai-with-mcp",children:"Why Integrate OpenAI with MCP?"}),"\n",(0,o.jsxs)(n.p,{children:["OpenAI's powerful language models take tool calling to the next level when you leverage MCP. This integration enables dynamic interactions, letting you build applications that adapt to various scenarios and user needs. I explained ",(0,o.jsx)(n.a,{href:"/oas-v4-is-out#how-does-mcp-work-for-mere-mortals",children:"how MCP tool calling works"})," in a previous post. Now, I'll show you how OpenAI's implementation impressed me."]}),"\n",(0,o.jsx)(n.p,{children:"With a simple, clever setup, you create applications that understand user queries in natural language and fetch relevant tools from MCP servers. This is extremely powerful\u2014it enables seamless, efficient interactions with AI models, making them more useful in real-world applications. Imagine an automated customer-support bot using MCP: it instantly retrieves necessary tools from MCP servers to resolve complex queries, such as billing discrepancies or technical troubleshooting, on the first call. This opens new possibilities for building intelligent applications that respond to user needs with greater precision and context-awareness."}),"\n",(0,o.jsx)(n.p,{children:"Anthropic's Claude Desktop app (MCP Client) was groundbreaking almost a year ago. Early adopters were impressed, and now OpenAI seamlessly integrates these capabilities into their SDKs. As the Spanish saying goes, \"Nadie sabe para quien trabaja\" (Nobody knows for whom they work), but MCP is clearly shaping the future of AI applications. OpenAI is making significant strides by implementing Anthropic's legacy directly in the LLM."}),"\n",(0,o.jsx)(n.p,{children:"You can build smarter, more adaptive applications by letting AI models fetch and use tools from MCP servers, reducing manual integration and boosting context-awareness."}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"The OpenAI's MCP integration is currently in beta, so expect some rough edges. However, the potential is immense, and I'm excited to see how this evolves."})}),"\n",(0,o.jsx)(n.h2,{id:"three-approaches-to-tool-calling",children:"Three Approaches to Tool Calling"}),"\n",(0,o.jsx)(n.p,{children:"You have three main ways to implement tool calling:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Approach"}),(0,o.jsx)(n.th,{children:"Description"}),(0,o.jsx)(n.th,{children:"Key Strength"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"MCP Clients"})}),(0,o.jsx)(n.td,{children:"Intermediary applications bridging models and external tool servers."}),(0,o.jsx)(n.td,{children:"Dynamic retrieval and adaptation"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Direct Tool Calling"})}),(0,o.jsx)(n.td,{children:"LLMs with built-in function calling via structured JSON."}),(0,o.jsx)(n.td,{children:"Precise programmatic control"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Native MCP Integration"})}),(0,o.jsx)(n.td,{children:"OpenAI\u2019s latest approach combining both worlds."}),(0,o.jsx)(n.td,{children:"Automatic discovery and zero-config operation"})]})]})]}),"\n",(0,o.jsx)(n.p,{children:"When choosing, remember: Direct Tool Calling is easy to set up but requires manual tool management. MCP Clients offer dynamic adaptability, fetching tools as needed and calling them for the user. LLMs with Native MCP Support provide the most seamless experience, automatically integrating and using tools from MCP Servers, though you may need some upfront knowledge about OpenAI's system and SDKs."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Summary:"}),(0,o.jsx)(n.br,{}),"\n","Select the approach that best fits your workflow\u2014manual, dynamic, or fully automated tool integration."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The OpenAI's MCP integration may not be call by the model directly; my guess is that it uses an internal MCP Client to fetch and call the tools, similar to how ",(0,o.jsx)(n.a,{href:"https://docs.mcp.com.ai/components/qbot",children:"QBot"})," works."]})}),"\n",(0,o.jsx)(n.h2,{id:"end-to-end-example",children:"End-to-End Example"}),"\n",(0,o.jsx)(n.p,{children:"Quick check:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.openai.com/v1/responses" \\\n -H "Authorization: Bearer $OPENAI_API_KEY" \\\n -H "Content-Type: application/json" \\\n -d \'{\n "model": "gpt-4.1",\n "tools": [\n {\n "type": "mcp",\n "server_label": "tacosmcp",\n "server_url": "https://tacostore.run.mcp.com.ai",\n "require_approval": "never"\n }\n ],\n "input": "What tacos do you have in the menu?"\n }\'\n'})}),"\n",(0,o.jsx)(n.p,{children:"Let's walk through the process: set up an MCP server, integrate the OpenAI SDK, write the code, run it, and see the results. These steps help you use MCP to enhance your applications."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Summary:"}),(0,o.jsx)(n.br,{}),"\n","Follow these steps to quickly connect OpenAI models to MCP and unlock dynamic tool calling."]}),"\n",(0,o.jsx)(n.h3,{id:"1-set-up-an-mcp-server",children:"1. Set Up an MCP Server"}),"\n",(0,o.jsxs)(n.p,{children:["First, set up an MCP server hosting the tools you want to use. You can run your own MCP server or use an existing one. For this example, use the HAPI MCP Server\u2014a simple way to get started. Find the ",(0,o.jsx)(n.a,{href:"https://docs.mcp.com.ai/components/hapi-server/",children:"HAPI MCP Server docs here"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Open a terminal, ensure Bun is installed, and run:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Start a HAPI MCP Server\nbun dev serve tacos --headless\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This starts a local MCP server hosting a tacos online store at ",(0,o.jsx)(n.code,{children:"http://localhost:3000"}),". I asked ",(0,o.jsx)(n.a,{href:"https://www.postman.com/product/ai-agent-builder/",children:"Postman Agent Builder"})," to create a simple tacos store API, which I used for the MCP server."]}),"\n",(0,o.jsx)(n.h3,{id:"2-create-an-openai-account",children:"2. Create an OpenAI Account"}),"\n",(0,o.jsxs)(n.p,{children:["If you don't have one, sign up for an OpenAI account and get your API key at the ",(0,o.jsx)(n.a,{href:"https://platform.openai.com/",children:"OpenAI platform"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"3-install-the-openai-sdk",children:"3. Install the OpenAI SDK"}),"\n",(0,o.jsx)(n.p,{children:"Use the OpenAI SDK in your preferred language. For this example, use JavaScript and TypeScript with Bun. In another terminal, run:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Initialize a new Bun project\nbun init -y -m\n# Install the OpenAI SDK\nbun add openai\n"})}),"\n",(0,o.jsx)(n.h3,{id:"4-write-the-code",children:"4. Write the Code"}),"\n",(0,o.jsxs)(n.p,{children:["Create a new file, for example, ",(0,o.jsx)(n.code,{children:"index.js"}),", and add:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'import OpenAI from "openai"\n\nconst client = new OpenAI({\n  apiKey: process.env[\'OPENAI_API_KEY\'], // This is the default and can be omitted\n})\n\nconst resp = await client.responses.create({\n  model: "gpt-5",\n  tools: [\n    {\n      type: "mcp",\n      server_label: "tacosmcp",\n      server_description: "The Tacos MCP Client",\n      server_url: "https://tacostore.run.mcp.com.ai",\n      require_approval: "never",\n    },\n  ],\n  input: "What tacos do you have in the menu?",\n})\n\nconsole.log(resp.output_text)\n'})}),"\n",(0,o.jsx)(n.h3,{id:"5-run-the-code",children:"5. Run the Code"}),"\n",(0,o.jsxs)(n.p,{children:["Set your OpenAI API key in the ",(0,o.jsx)(n.code,{children:"OPENAI_API_KEY"})," environment variable, then run:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bun run index.js\n"})}),"\n",(0,o.jsx)(n.h3,{id:"6-see-the-magic",children:"6. See the Magic"}),"\n",(0,o.jsx)(n.p,{children:"The model fetches tools from the MCP server and uses them to answer your query. You should see a response listing the tacos available on the menu. To reinforce your learning, validate the returned taco list against the API response. This simple verification ensures tool execution works correctly and builds confidence in using MCP."}),"\n",(0,o.jsx)(n.h3,{id:"7-explore-further",children:"7. Explore Further"}),"\n",(0,o.jsx)(n.p,{children:"Modify the input query to ask different questions or explore other tools on the MCP server. The possibilities are endless!"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Summary:"}),(0,o.jsx)(n.br,{}),"\n","You can set up, connect, and validate MCP-powered tool calling in minutes, then experiment to discover more capabilities."]}),"\n",(0,o.jsx)(n.h2,{id:"demo-video",children:"Demo Video"}),"\n",(0,o.jsx)(n.p,{children:"[PLACEHOLDER] - video coming soon"}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"Integrating OpenAI with MCP unlocks a world of possibilities for building intelligent applications that adapt to various scenarios and user needs. By leveraging MCP, you create dynamic, context-aware interactions with AI models, leading to more accurate and relevant outputs."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Summary:"}),(0,o.jsx)(n.br,{}),"\n","Use MCP to make your AI applications smarter, more flexible, and better suited to real-world challenges."]}),"\n",(0,o.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://platform.openai.com/docs/",children:"OpenAI API Documentation"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://platform.openai.com/docs/guides/tools-connectors-mcp?lang=javascript",children:"Connectors and MCP servers (Beta)"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/openai",children:"OpenAI NPM Package"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://modelcontextprotocol.io/",children:"Model Context Protocol (MCP) Overview"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8521:e=>{e.exports=JSON.parse('{"permalink":"/openai-meets-mcp","source":"@site/blog/openai-meets-mcp/index.mdx","title":"OpenAI SDK Meets MCP (Model Context Protocol)","description":"A comprehensive guide on how to integrate OpenAI\'s SDK with MCP (Model Context Protocol) to enhance AI model interactions through dynamic tool calling.","date":"2025-10-09T12:02:09.000Z","tags":[{"inline":false,"label":"MCP","permalink":"/tags/mcp","description":"MCP is an open protocol for connecting LLM apps to external data sources and tools, enabling seamless integration and interoperability.\\n"},{"inline":false,"label":"OpenAI","permalink":"/tags/openai","description":"OpenAI is an AI research and deployment company focused on ensuring that artificial general intelligence benefits all of humanity.\\n"},{"inline":false,"label":"Tool Calling","permalink":"/tags/tool-calling","description":"Tool calling refers to the ability of AI models to invoke external tools or APIs to perform specific tasks or retrieve information, enhancing their functionality and capabilities.\\n"},{"inline":false,"label":"OAS","permalink":"/tags/oas","description":"OpenAPI Specification\u2014industry standard for describing RESTful APIs and enabling interoperability."}],"readingTime":5.88,"hasTruncateMarker":true,"authors":[{"name":"Adrian Escutia","title":"La Rebelion Founder","url":"https://adrian.escutia.me","page":{"permalink":"/authors/adrian"},"socials":{"x":"https://x.com/ades_mx","linkedin":"https://www.linkedin.com/in/adrianescutia/","github":"https://github.com/adrianescutia","newsletter":"https://rebelion.la"},"bio":"Adrian is the founder of La Rebelion, a newsletter about AI, technology, and the future. He is also a software engineer and entrepreneur.","imageURL":"https://github.com/adrianescutia.png","key":"adrian"}],"frontMatter":{"title":"OpenAI SDK Meets MCP (Model Context Protocol)","description":"A comprehensive guide on how to integrate OpenAI\'s SDK with MCP (Model Context Protocol) to enhance AI model interactions through dynamic tool calling.","authors":["adrian"],"tags":["mcp","openai","tool-calling","oas"],"image":"https://cdn.gamma.app/z3n406kubdfbysb/generated-images/ibH5HhVl1c3OZPUlUBXBp.png"},"unlisted":false,"nextItem":{"title":"MCP Threats and Misleadings - Prompt Injection","permalink":"/mcp-threats-prompt-injection"}}')}}]);